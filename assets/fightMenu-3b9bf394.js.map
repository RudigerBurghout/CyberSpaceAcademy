{"version":3,"file":"fightMenu-3b9bf394.js","sources":["../../src/fightMenu.js"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nimport \t{ } from \"https://unpkg.com/@workadventure/scripting-api-extra@^1/dist/bundle.js\";\n\nconsole.log('Script started successfully');\n\n//only one action message per player loaded script\nlet combatMessage = undefined;\nlet popupMessage = undefined;\n\nconst delay = ms => new Promise(res => setTimeout(res, ms));\n\n// Initialization\nWA.onInit().then(async () => {\n\t\n    console.log('Scripting API ready');\n    console.log('Player tags: ',WA.player.tags)\n\t\n\tawait WA.players.configureTracking({\n        players: true,\n        movement: false,\n    });\n\t\n\tsetupPopup();\n\tsetupCombat();\n\t\n    console.log('Scripting API Extra ready');\n\t\n}).catch(e => console.error(e));\n\nfunction setupPopup () {\n\t//popup subscription\n\tWA.room.onEnterLayer('visibleZones/popup').subscribe(() => {\n\t\tsetPopupMessage(\"Druk 'spatiebalk' om een popup te openen!\");\n\t});\n\t\t\n\t// When someone leaves the doorstep (inside the room), we remove the message\n\tWA.room.onLeaveLayer('visibleZones/popup').subscribe(() => {\n\t\tif (popupMessage !== undefined) {\n\t\t\tpopupMessage.remove();\n\t\t}\n\t});\n}\n\nfunction setupCombat () {\n\t//in game combat controls\n\t//does not change health value, but the HTML file does\n\tWA.room.onEnterLayer('visibleZones/attack1').subscribe(() => {\n\t\tsetCombatMessage(\"druk om spatiebalk om 'Heldhaftige Slag' te gebruiken!\", 1);\n    });\n\tWA.room.onEnterLayer('visibleZones/attack2').subscribe(() => {\n\t\tsetCombatMessage(\"druk om spatiebalk om 'Kwaadaardige Cyber Medicijnen' te gebruiken!\", 2);\n    });\n\tWA.room.onEnterLayer('visibleZones/attack3').subscribe(() => {\n\t\tsetCombatMessage(\"druk om spatiebalk om 'Kwaadaardige Slag' te gebruiken!\", 3);\n    });\n\tWA.room.onEnterLayer('visibleZones/attack4').subscribe(() => {\n\t\tsetCombatMessage(\"druk om spatiebalk om 'Heldhaftige Cyber Medicijnen' te gebruiken!\", 4);\n    });\n\t\n\t// When someone leaves the doorstep (inside the room), we remove the message\n\tWA.room.onLeaveLayer('visibleZones/attack1').subscribe(() => {\n\t\tif (combatMessage !== undefined) { combatMessage.remove(); }\n\t});\n\tWA.room.onLeaveLayer('visibleZones/attack2').subscribe(() => {\n\t\tif (combatMessage !== undefined) { combatMessage.remove(); }\n\t});\n\tWA.room.onLeaveLayer('visibleZones/attack3').subscribe(() => {\n\t\tif (combatMessage !== undefined) { combatMessage.remove(); }\n\t});\n\tWA.room.onLeaveLayer('visibleZones/attack4').subscribe(() => {\n\t\tif (combatMessage !== undefined) { combatMessage.remove(); }\n\t});\n}\n\nfunction displayPopup() { \n    helloWorldPopup = WA.ui.openPopup(\"popupRectangle\", 'Hallo wereld!', [{\n        label: \"Sluit\",\n        className: \"primary\",\n        callback: (popup) => {\n            // Close the popup when the \"Sluit\" button is pressed.\n            popup.close();\n        }\n    }]);\n}\n\nfunction addMenuOption() { \n    const menu = WA.ui.registerMenuCommand('menu test',\n\t\t{\n\t\t\tcallback: () => {\n\t\t\t\tWA.chat.sendChatMessage('test');\n\t\t\t},\n\t\t\tkey: \"test\"\n\t\t}\n\t);\n}\n\nfunction setPopupMessage(msg = \"Druk 'spatiebalk' om een popup te openen!\"){\n\tpopupMessage = WA.ui.displayActionMessage({\n\t\tmessage: msg,\n\t\tcallback: () => {\n\t\t\tdisplayPopup();\n            setPopupMessage(\"Druk 'spatiebalk' om een popup te openen!\");\n\t\t}\n\t});\n}\nfunction setCombatMessage(msg, atkID){\n\tcombatMessage = WA.ui.displayActionMessage({\n\t\tmessage: msg,\n\t\tcallback: () => {\n\t\t\tactivateAttack(atkID);\n            setCombatMessage(msg, atkID);\n\t\t}\n\t});\n}\n\nfunction activateAttack(atkID){\n\tswitch(atkID){\n\tcase 1:\n\t\tWA.state.attack1 ++;\n\t\tconsole.log(WA.state.attack1);\n\t\tbreak;\n\tcase 2:\n\t\tWA.state.attack2 ++;\n\t\tconsole.log(WA.state.attack2);\n\t\tbreak;\n\tcase 3:\n\t\tWA.state.attack3 ++;\n\t\tconsole.log(WA.state.attack3);\n\t\tbreak;\n\tcase 4:\n\t\tWA.state.attack4 ++;\n\t\tconsole.log(WA.state.attack4);\n\t\tbreak;\n\t}\n}\n\nexport {};\n"],"names":["combatMessage","popupMessage","setupPopup","setupCombat","setPopupMessage","setCombatMessage","displayPopup","popup","msg","atkID","activateAttack"],"mappings":"+EAIA,QAAQ,IAAI,6BAA6B,EAGzC,IAAIA,EACAC,EAKJ,GAAG,OAAM,EAAG,KAAK,SAAY,CAEzB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAgB,GAAG,OAAO,IAAI,EAE7C,MAAM,GAAG,QAAQ,kBAAkB,CAC5B,QAAS,GACT,SAAU,EAClB,CAAK,EAEJC,IACAC,IAEG,QAAQ,IAAI,2BAA2B,CAE3C,CAAC,EAAE,MAAM,GAAK,QAAQ,MAAM,CAAC,CAAC,EAE9B,SAASD,GAAc,CAEtB,GAAG,KAAK,aAAa,oBAAoB,EAAE,UAAU,IAAM,CAC1DE,EAAgB,2CAA2C,CAC7D,CAAE,EAGD,GAAG,KAAK,aAAa,oBAAoB,EAAE,UAAU,IAAM,CACtDH,IAAiB,QACpBA,EAAa,OAAM,CAEtB,CAAE,CACF,CAEA,SAASE,GAAe,CAGvB,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CAC5DE,EAAiB,yDAA0D,CAAC,CAC9E,CAAK,EACJ,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CAC5DA,EAAiB,sEAAuE,CAAC,CAC3F,CAAK,EACJ,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CAC5DA,EAAiB,0DAA2D,CAAC,CAC/E,CAAK,EACJ,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CAC5DA,EAAiB,qEAAsE,CAAC,CAC1F,CAAK,EAGJ,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CACxDL,IAAkB,QAAaA,EAAc,OAAQ,CAC3D,CAAE,EACD,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CACxDA,IAAkB,QAAaA,EAAc,OAAQ,CAC3D,CAAE,EACD,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CACxDA,IAAkB,QAAaA,EAAc,OAAQ,CAC3D,CAAE,EACD,GAAG,KAAK,aAAa,sBAAsB,EAAE,UAAU,IAAM,CACxDA,IAAkB,QAAaA,EAAc,OAAQ,CAC3D,CAAE,CACF,CAEA,SAASM,GAAe,CACpB,gBAAkB,GAAG,GAAG,UAAU,iBAAkB,gBAAiB,CAAC,CAClE,MAAO,QACP,UAAW,UACX,SAAWC,GAAU,CAEjBA,EAAM,MAAK,CACd,CACJ,CAAA,CAAC,CACN,CAaA,SAASH,EAAgBI,EAAM,4CAA4C,CAC1EP,EAAe,GAAG,GAAG,qBAAqB,CACzC,QAASO,EACT,SAAU,IAAM,CACfF,IACSF,EAAgB,2CAA2C,CACpE,CACH,CAAE,CACF,CACA,SAASC,EAAiBG,EAAKC,EAAM,CACpCT,EAAgB,GAAG,GAAG,qBAAqB,CAC1C,QAASQ,EACT,SAAU,IAAM,CACfE,EAAeD,CAAK,EACXJ,EAAiBG,EAAKC,CAAK,CACpC,CACH,CAAE,CACF,CAEA,SAASC,EAAeD,EAAM,CAC7B,OAAOA,EAAK,CACZ,IAAK,GACJ,GAAG,MAAM,UACT,QAAQ,IAAI,GAAG,MAAM,OAAO,EAC5B,MACD,IAAK,GACJ,GAAG,MAAM,UACT,QAAQ,IAAI,GAAG,MAAM,OAAO,EAC5B,MACD,IAAK,GACJ,GAAG,MAAM,UACT,QAAQ,IAAI,GAAG,MAAM,OAAO,EAC5B,MACD,IAAK,GACJ,GAAG,MAAM,UACT,QAAQ,IAAI,GAAG,MAAM,OAAO,EAC5B,KACA,CACF"}