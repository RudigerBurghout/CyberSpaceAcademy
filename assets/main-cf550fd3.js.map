{"version":3,"file":"main-cf550fd3.js","sources":["../../src/main.js"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\n//import { webOut } \tfrom \t\"./web.ts\";\nimport \t{ } \t\t\tfrom \t\"https://unpkg.com/@workadventure/scripting-api-extra@^1/dist/bundle.js\";\n\nconsole.log('Script started successfully');\n\n//only one animation action message per player loaded script\nlet animMessage = undefined;\n\nconst delay = ms => new Promise(res => setTimeout(res, ms));\n\nasync function displayAnim(animTime, layerOn, layerOff) { \n  \n    WA.room.showLayer(layerOn);\n    WA.room.hideLayer(layerOff);\n\t\n\tawait delay(animTime);\n\t\n    WA.room.hideLayer(layerOn);\n    WA.room.showLayer(layerOff);\n    \n}\nasync function toggleDanger(animTime, dangerOn, dangerOff) { \n  \n    WA.room.showLayer(dangerOn);\n    WA.room.hideLayer(dangerOff);\n\t\n\tawait delay(animTime);\n\t\n    WA.room.hideLayer(dangerOn);\n    WA.room.showLayer(dangerOff);\n\t\n\tawait delay(animTime);\n    \n\ttoggleDanger(animTime, dangerOn, dangerOff)\n}\n\nfunction setAnimMessage(msg = \"Press 'space' to play animation\"){\n\tanimMessage = WA.ui.displayActionMessage({\n\t\tmessage: msg,\n\t\tcallback: () => {\n\t\t\tdisplayAnim(800,\"animations/swing_on\",\"animations/swing_off\");\n            setAnimMessage(\"Press 'space' to swing the swing\");\n\t\t}\n\t});\n}\n// Waiting for the API to be ready\nWA.onInit().then(async () => {\n\t\n\t//webOut(42, 5, 2,'test message')\n\t\n    console.log('Scripting API ready');\n    console.log('Player tags: ',WA.player.tags)\n\t\n\tawait WA.players.configureTracking({\n        players: true,\n        movement: false,\n    });\n\t\n\t//initialise all danger layers with their timings\n\t//toggleDanger(3000, 'visibleZones/danger_1_on', 'visibleZones/danger_1_off');\n\t//toggleDanger(5000, 'visibleZones/danger_2_on', 'visibleZones/danger_2_off');\n\t\n\t// WA.room.onEnterLayer('animationzones/swing').subscribe(() => {\n    // setAnimMessage(\"Press 'space' to swing the swing\");\n    // });\n\t\n    // When someone leaves the doorstep (inside the room), we remove the message\n    // WA.room.onLeaveLayer('animationzones/swing').subscribe(() => {\n        // if (animMessage !== undefined) {\n            // animMessage.remove();\n        // }\n    // });\n\n        console.log('Scripting API Extra ready');\n\t\n\n}).catch(e => console.error(e));\n\nexport {};\n"],"names":[],"mappings":"+EAKA,QAAQ,IAAI,6BAA6B,EA2CzC,GAAG,OAAM,EAAG,KAAK,SAAY,CAIzB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAgB,GAAG,OAAO,IAAI,EAE7C,MAAM,GAAG,QAAQ,kBAAkB,CAC5B,QAAS,GACT,SAAU,EAClB,CAAK,EAiBG,QAAQ,IAAI,2BAA2B,CAG/C,CAAC,EAAE,MAAM,GAAK,QAAQ,MAAM,CAAC,CAAC"}