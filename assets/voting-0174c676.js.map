{"version":3,"file":"voting-0174c676.js","sources":["../../src/web.js","../../src/voting.js"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nexport async function webOut(id = 1, chapter = 1, test = 1, msg = 'Hi') {\n  try {\n    // üëáÔ∏è const response: Response\n    const response = await fetch('http://localhost:1880/space', {\n      method: 'POST',\n      body: JSON.stringify({\n\t\t  userId: id,\n\t\t  chapterNum: chapter,\n\t\t  testNum: test,\n\t\t  content: msg,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error! status: ${response.status}`);\n    }\n\n    // üëáÔ∏è const result: CreateUserResponse\n    const result = (await response.json());\n\tconsole.log('original message:', result.content, result.userId, result.chapterNum, result.testNum)\n\tconsole.log(WA.player.name, 'has', result.message);\n\n    return result;\n  } catch (error) {\n    if (error instanceof Error) {\n      console.log('error message: ', error.message);\n      return error.message;\n    } else {\n      console.log('unexpected error: ', error);\n      return 'An unexpected error occurred';\n    }\n  }\n}\n\nexport async function webVoteReset() {\n  try {\n    // üëáÔ∏è const response: Response\n    const response = await fetch('https://poll.toekomst.school/reset', {\n      method: 'POST',\n      body: JSON.stringify({\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error! status: ${response.status}`);\n    }\n\n    // üëáÔ∏è const result: CreateUserResponse\n    const result = (await response.json());\n\n    return result;\n  } catch (error) {\n    if (error instanceof Error) {\n      console.log('error message: ', error.message);\n      return error.message;\n    } else {\n      console.log('unexpected error: ', error);\n      return 'An unexpected error occurred';\n    }\n  }\n}\n\nexport async function webVoteUpdate(opt = 'Option A') {\n  try {\n    // üëáÔ∏è const response: Response\n    const response = await fetch('https://poll.toekomst.school/vote', {\n      method: 'POST',\n      body: JSON.stringify({\n\t\t  option: opt,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error! status: ${response.status}`);\n    }\n\n    // üëáÔ∏è const result: CreateUserResponse\n    const result = (await response.json());\n\n    return result;\n  } catch (error) {\n    if (error instanceof Error) {\n      console.log('error message: ', error.message);\n      return error.message;\n    } else {\n      console.log('unexpected error: ', error);\n      return 'An unexpected error occurred';\n    }\n  }\n}\n\n","/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nimport \t{ } from \"https://unpkg.com/@workadventure/scripting-api-extra@^1/dist/bundle.js\";\nimport {webVoteReset} from \"./web.js\";\n\nconsole.log('Script started successfully');\n\n// const delay = ms => new Promise(res => setTimeout(res, ms));\nlet resultPopup = undefined;\n\n// Waiting for the API to be ready\nWA.onInit().then(async () => {\n\t\n    console.log('Scripting API ready');\n    console.log('Player tags: ',WA.player.tags)\n\t\n\tawait WA.players.configureTracking({\n        players: true,\n        movement: false,\n    });\n\t\n\tWA.room.onEnterLayer('zones/yellow').subscribe(() => {\n\t\tWA.state.voteY ++;\n\t\tconsole.log(WA.state.voteY);\n    });\n\tWA.room.onEnterLayer('zones/green').subscribe(() => {\n\t\tWA.state.voteG ++;\n\t\tconsole.log(WA.state.voteG);\n    });\n\tWA.room.onEnterLayer('zones/blue').subscribe(() => {\n\t\tWA.state.voteB ++;\n\t\tconsole.log(WA.state.voteB);\n    });\n\tWA.room.onEnterLayer('zones/red').subscribe(() => {\n\t\tWA.state.voteR ++;\n\t\tconsole.log(WA.state.voteR);\n    });\n\tWA.room.onEnterLayer('visibleZones/reset').subscribe(() => {\n\t\tWA.state.voteY = 0;\n\t\tWA.state.voteG = 0;\n\t\tWA.state.voteB = 0;\n\t\tWA.state.voteR = 0;\n\t\twebVoteReset();\n    });\n\n    console.log('Scripting API Extra ready');\n\t\n\n}).catch(e => console.error(e));\n\nexport {};\n"],"names":["webVoteReset","response","error"],"mappings":"+EAwCO,eAAeA,GAAe,CACnC,GAAI,CAEF,MAAMC,EAAW,MAAM,MAAM,qCAAsC,CACjE,OAAQ,OACR,KAAM,KAAK,UAAU,CAC3B,CAAO,EACD,QAAS,CACP,eAAgB,mBAChB,OAAQ,kBACT,CACP,CAAK,EAED,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,kBAAkBA,EAAS,MAAM,EAAE,EAMrD,OAFgB,MAAMA,EAAS,KAAM,CAGtC,OAAQC,EAAO,CACd,OAAIA,aAAiB,OACnB,QAAQ,IAAI,kBAAmBA,EAAM,OAAO,EACrCA,EAAM,UAEb,QAAQ,IAAI,qBAAsBA,CAAK,EAChC,+BAEV,CACH,CCjEA,QAAQ,IAAI,6BAA6B,EAMzC,GAAG,OAAM,EAAG,KAAK,SAAY,CAEzB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAgB,GAAG,OAAO,IAAI,EAE7C,MAAM,GAAG,QAAQ,kBAAkB,CAC5B,QAAS,GACT,SAAU,EAClB,CAAK,EAEJ,GAAG,KAAK,aAAa,cAAc,EAAE,UAAU,IAAM,CACpD,GAAG,MAAM,QACT,QAAQ,IAAI,GAAG,MAAM,KAAK,CAC5B,CAAK,EACJ,GAAG,KAAK,aAAa,aAAa,EAAE,UAAU,IAAM,CACnD,GAAG,MAAM,QACT,QAAQ,IAAI,GAAG,MAAM,KAAK,CAC5B,CAAK,EACJ,GAAG,KAAK,aAAa,YAAY,EAAE,UAAU,IAAM,CAClD,GAAG,MAAM,QACT,QAAQ,IAAI,GAAG,MAAM,KAAK,CAC5B,CAAK,EACJ,GAAG,KAAK,aAAa,WAAW,EAAE,UAAU,IAAM,CACjD,GAAG,MAAM,QACT,QAAQ,IAAI,GAAG,MAAM,KAAK,CAC5B,CAAK,EACJ,GAAG,KAAK,aAAa,oBAAoB,EAAE,UAAU,IAAM,CAC1D,GAAG,MAAM,MAAQ,EACjB,GAAG,MAAM,MAAQ,EACjB,GAAG,MAAM,MAAQ,EACjB,GAAG,MAAM,MAAQ,EACjBF,GACF,CAAK,EAED,QAAQ,IAAI,2BAA2B,CAG3C,CAAC,EAAE,MAAM,GAAK,QAAQ,MAAM,CAAC,CAAC"}